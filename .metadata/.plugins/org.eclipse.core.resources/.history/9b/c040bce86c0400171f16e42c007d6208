#include <stdint.h>
#include <stdio.h>

#include "detect_objects.h"


// marks each object: is it a ball or not?
int32_t filterBalls(struct Object* objectArray, uint16_t length)
{
    uint8_t i = 0;
    int32_t numBalls = 0;
    while((objectArray[i].id != EMPTY_OBJECT_ID) && (i < length))
    {
        // if object is smaller than possible for our ball
        if(objectArray[i].maxX - objectArray[i].minX < 5 ||
            objectArray[i].maxY - objectArray[i].minY < 5)
        {
            objectArray[i].isBall = 0;
        }

        // if the object is on the edge of the image
        // (where edge is defined as 2 pixel width surrounding edge)
        else if(objectArray[i].minX < 2 || objectArray[i].minY < 2 ||
            objectArray[i].maxX > IMG_WIDTH-3 || objectArray[i].maxY > IMAGE_HEIGHT-3)
        {
            objectArray[i].isBall = 0;
        }

        else // it's a ball
        {
            objectArray[i].isBall = 1;
            numBalls++;
        }
        i++;
    }
    return numBalls;
}
