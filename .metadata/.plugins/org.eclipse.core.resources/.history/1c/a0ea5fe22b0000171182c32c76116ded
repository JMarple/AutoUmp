#include <xs1.h>
#include <platform.h>
#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>

#include "algs.h"

void Denoise(uint8_t* unsafe bitBuffer)
{

}

// bitBuffer is an entire bit image
void FloodFill(uint8_t* unsafe bitBuffer)
{
    // -----------------------
    // Tim your code goes here.
    // -----------------------
}

void FloodFillThread(chanend stream)
{ unsafe {

    uint32_t start, mid, end;
    timer t;

    while (1==1)
    {
        // Blocking statement that recieves a bit image
        uint8_t* unsafe bitBuffer;
        stream :> bitBuffer;

        t :> start;

        Denoise(bitBuffer);

        t :> mid;

        FloodFill(bitBuffer);

        t :> end;
        printf("Total Clock ticks (@100Mhz) = %d\n", (end - start));
        printf("FF = %d\n", (end - mid));
    }
}}
